{% extends "layout.html" %}

{% block content %}
    <div class="upload-section">
        </div>

    <div class="file-list-section">
        <h2>Your Uploaded Files</h2>
        <ul class="file-list">
        
        {# --- MODIFIED LOOP --- #}
        {% for file_meta in files %}
            <li class="file-item">
                <div class="file-info">
                    <a href="/uploads/{{ file_meta.filename }}" target="_blank">{{ file_meta.filename }}</a>
                    
                    {# --- NEW: TAGS DISPLAY --- #}
                    <div class="tags-container">
                        {% for tag in file_meta.tags.split(',') %}
                            <span class="tag">{{ tag.strip() }}</span>
                        {% endfor %}
                    </div>

                </div>
                <form action="/delete/{{ file_meta.filename }}" method="post" class="delete-form" onsubmit="return confirm('Are you sure you want to delete this file?');">
                    <button type="submit" class="btn-delete">Delete</button>
                </form>
            </li>
        {% else %}
            <li class="no-files">You haven't uploaded any files yet.</li>
        {% endfor %}
        </ul>
    </div>
{% endblock %}